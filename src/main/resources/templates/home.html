<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>VetCare Home</title>
    
    <link rel="stylesheet" th:href="@{/css/home.css}">
    <link rel="stylesheet" th:href="@{/css/bookings.css}">
</head>
<body onload="hideSuccessMessage(); checkSessionToken();">

    <!-- Navbar remains unchanged -->
    <link rel="stylesheet" th:href="@{/css/navbar.css}">

    <div th:insert="~{fragments/navbar :: navbar}"></div>

    <!-- Optional Login Prompt -->
    <div id="login-prompt" style="display: none; background-color: #a5ffa7; padding: 1px; text-align: center;">
        <p>Please <a th:href="@{/login}">log in</a> to access all features.</p>
    </div>

    <!-- Success Message Section -->
    <div id="success-message" class="success-message" style="display: none;">
        <!-- Success message will be injected here -->
    </div>

    <!-- Banner Section with Slogan -->
    <div id="banner">
        <h2>Comprehensive Pet Care Made Simple</h2>
        <p>Welcome to VetCare – Your Trusted Online Vet Clinic Management System</p>
    </div>

    <main>
        <section id="appointments">
            <h2>Upcoming Appointments:</h2>
            <!-- Loop through the bookings and display each one like the My Booking/s page -->
            <div class="booking-list">
                <div th:each="booking : ${bookings}" class="booking-bar">
                    <span class="booking-info-top">Booking for:</span>
                    <span class="booking-info-bottom">
                        At <span th:text="${booking.timeSlot}">Time</span> on 
                        <span th:text="${booking.bookingDate}">Date</span> with Dr. Unknown
                    </span>
                    <!-- Add Reschedule and Cancel Buttons -->
                    <div class="booking-actions">
                        <!-- Reschedule Button -->
                        <button class="reschedule-button" th:onclick="'confirmReschedule(' + ${booking.id} + ');'">
                            <img th:src="@{/images/reschedule.png}" alt="Reschedule" />
                        </button>
                        <!-- Cancel Button -->
                        <button class="cancel-button" th:onclick="confirmCancel([[${booking.id}]])">
                            <img th:src="@{/images/cancel.png}" alt="Cancel" />
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Welcome Section with the Image -->
        <section id="welcome">
            <div>
                <p>At VetCare, we believe your pets deserve the best care, anytime and anywhere. 
                    Our state-of-the-art platform offers pet owners an easy and convenient way to manage every aspect 
                    of their pet’s health. From scheduling appointments to accessing medical records, VetCare 
                    seamlessly connects you with trusted veterinarians and clinics in your local area. 
                    With real-time data and a user-friendly interface, you’ll always have the most up-to-date 
                    information at your fingertips.</p>
                <img src="/images/pexels-amy-mccormack-3650773-5463180.jpg" alt="Adorable puppies" style="width: 25%; height: auto;">
            </div>
        </section>
    </main>

    <!-- Footer Section -->
    <footer>
        <p>&copy; 2024 VetCare. All rights reserved.</p>
    </footer>

    <script>
        function confirmReschedule(bookingId) {
            if (confirm("Are you sure you want to reschedule this booking?")) {
                // Redirect to the reschedule endpoint
                window.location.href = "/rescheduleBooking/" + bookingId;
            }
        }
        function confirmCancel(bookingId) {
            if (confirm("Are you sure you want to cancel this booking?")) {
                // Redirect to the cancel endpoint
                window.location.href = "/cancelBooking/" + bookingId;
            }
        }
    </script>
</body>
</html>
